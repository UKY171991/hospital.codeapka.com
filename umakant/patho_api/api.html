<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patho API Testing Interface</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .api-card { margin-bottom: 20px; transition: all 0.3s ease; }
        .api-card:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .method-badge { font-size: 0.8em; margin-right: 5px; }
        .response-container { max-height: 400px; overflow-y: auto; }
        .endpoint-url { font-family: 'Courier New', monospace; background: #e9ecef; padding: 5px 10px; border-radius: 4px; }
        .auth-section { background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 15px; margin: 15px 0; }
        .test-form { background: white; border-radius: 8px; padding: 20px; margin: 10px 0; }
        .loading { display: none; }
        .result-success { background: #d1edff; border-left: 4px solid #0dcaf0; }
        .result-error { background: #f8d7da; border-left: 4px solid #dc3545; }
        .result-warning { background: #fff3cd; border-left: 4px solid #ffc107; }
        .nav-pills .nav-link.active { background-color: #0d6efd; }
        .api-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <div class="row">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h1><i class="fas fa-code text-primary"></i> Patho API Testing Interface</h1>
                    <div>
                        <button class="btn btn-outline-primary" onclick="loadAllApis()">
                            <i class="fas fa-sync-alt"></i> Refresh APIs
                        </button>
                        <button class="btn btn-outline-success" onclick="testAllEndpoints()">
                            <i class="fas fa-play"></i> Test All
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Authentication Section -->
        <div class="auth-section">
            <h5><i class="fas fa-key text-warning"></i> Authentication Settings</h5>
            <div class="row">
                <div class="col-md-4">
                    <label class="form-label">API Key (Header: X-Api-Key)</label>
                    <input type="text" id="apiKey" class="form-control" placeholder="your-api-key">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Secret Key (Param: secret_key)</label>
                    <input type="text" id="secretKey" class="form-control" placeholder="your-secret-key">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Base URL</label>
                    <input type="text" id="baseUrl" class="form-control" value="/umakant/patho_api/">
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <ul class="nav nav-pills mb-4" id="apiTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="overview-tab" data-bs-toggle="pill" data-bs-target="#overview" type="button" role="tab">
                    <i class="fas fa-chart-bar"></i> Overview
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="endpoints-tab" data-bs-toggle="pill" data-bs-target="#endpoints" type="button" role="tab">
                    <i class="fas fa-list"></i> All Endpoints
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="testing-tab" data-bs-toggle="pill" data-bs-target="#testing" type="button" role="tab">
                    <i class="fas fa-flask"></i> API Testing
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="docs-tab" data-bs-toggle="pill" data-bs-target="#docs" type="button" role="tab">
                    <i class="fas fa-book"></i> Documentation
                </button>
            </li>
        </ul>

        <div class="tab-content" id="apiTabContent">
            <!-- Overview Tab -->
            <div class="tab-pane fade show active" id="overview" role="tabpanel">
                <div class="row">
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-code fa-2x text-primary mb-2"></i>
                                <h5 id="totalApis">0</h5>
                                <p class="card-text">Total APIs</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-check-circle fa-2x text-success mb-2"></i>
                                <h5 id="workingApis">0</h5>
                                <p class="card-text">Working APIs</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-exclamation-triangle fa-2x text-warning mb-2"></i>
                                <h5 id="errorApis">0</h5>
                                <p class="card-text">APIs with Errors</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-clock fa-2x text-info mb-2"></i>
                                <h5 id="lastTested">Never</h5>
                                <p class="card-text">Last Tested</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-4">
                    <h4>API Status Overview</h4>
                    <div id="apiStatusOverview"></div>
                </div>
            </div>

            <!-- All Endpoints Tab -->
            <div class="tab-pane fade" id="endpoints" role="tabpanel">
                <div id="apiList" class="api-grid"></div>
            </div>

            <!-- API Testing Tab -->
            <div class="tab-pane fade" id="testing" role="tabpanel">
                <div class="test-form">
                    <h4><i class="fas fa-flask"></i> Manual API Testing</h4>
                    
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Method</label>
                            <select id="testMethod" class="form-select">
                                <option value="GET">GET</option>
                                <option value="POST">POST</option>
                                <option value="PUT">PUT</option>
                                <option value="DELETE">DELETE</option>
                            </select>
                        </div>
                        <div class="col-md-9">
                            <label class="form-label">Endpoint URL</label>
                            <input type="text" id="testUrl" class="form-control" placeholder="/umakant/patho_api/doctor.php?action=list">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Request Headers (JSON)</label>
                            <textarea id="testHeaders" class="form-control" rows="4" placeholder='{"X-Api-Key": "your-key"}'></textarea>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Request Body (JSON)</label>
                            <textarea id="testBody" class="form-control" rows="4" placeholder='{"name": "Test Doctor", "email": "test@example.com"}'></textarea>
                        </div>
                    </div>

                    <button class="btn btn-primary" onclick="executeManualTest()">
                        <i class="fas fa-play"></i> Execute Test
                    </button>

                    <div id="manualTestResult" class="mt-3"></div>
                </div>
            </div>

            <!-- Documentation Tab -->
            <div class="tab-pane fade" id="docs" role="tabpanel">
                <div class="card">
                    <div class="card-body">
                        <h4><i class="fas fa-book"></i> API Documentation</h4>
                        
                        <h5>Authentication Methods</h5>
                        <ul>
                            <li><strong>API Key Header:</strong> <code>X-Api-Key: your-api-key</code></li>
                            <li><strong>Secret Parameter:</strong> <code>secret_key=your-secret-key</code></li>
                            <li><strong>Session-based:</strong> Login with username/password</li>
                            <li><strong>Bearer Token:</strong> <code>Authorization: Bearer your-token</code></li>
                        </ul>

                        <h5>Common Actions</h5>
                        <ul>
                            <li><strong>list:</strong> Get all records (GET /endpoint.php?action=list)</li>
                            <li><strong>get:</strong> Get single record (GET /endpoint.php?action=get&id=123)</li>
                            <li><strong>save:</strong> Create/Update record (POST /endpoint.php?action=save)</li>
                            <li><strong>delete:</strong> Delete record (POST /endpoint.php?action=delete&id=123)</li>
                        </ul>

                        <h5>Available Endpoints</h5>
                        <div id="endpointsDocs"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // API endpoints configuration with complete specifications
        const apiEndpoints = [
            {
                name: 'Doctor API',
                file: 'doctor.php',
                description: 'Comprehensive doctor management with specializations, qualifications, and contact details',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/doctor.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all doctors with pagination',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        queryParams: {
                            'page': 1,
                            'limit': 10,
                            'search': 'optional search term'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'name': 'Dr. John Doe',
                                    'qualification': 'MBBS, MD',
                                    'specialization': 'Cardiology',
                                    'hospital': 'City Hospital',
                                    'contact_no': '9876543210',
                                    'email': 'john.doe@hospital.com',
                                    'address': '123 Medical Street',
                                    'registration_no': 'MED12345',
                                    'percent': 10.5,
                                    'created_at': '2025-09-08T10:30:00Z'
                                }
                            ],
                            'pagination': {
                                'total': 50,
                                'page': 1,
                                'limit': 10,
                                'pages': 5
                            }
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single doctor by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'name': 'Dr. John Doe',
                                'qualification': 'MBBS, MD',
                                'specialization': 'Cardiology',
                                'hospital': 'City Hospital',
                                'contact_no': '9876543210',
                                'phone': '9876543210',
                                'email': 'john.doe@hospital.com',
                                'address': '123 Medical Street',
                                'registration_no': 'MED12345',
                                'percent': 10.5,
                                'added_by': 1,
                                'created_at': '2025-09-08T10:30:00Z'
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create new doctor or update existing',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'name': 'Dr. Jane Smith',
                            'qualification': 'MBBS, MS',
                            'specialization': 'Orthopedics',
                            'hospital': 'General Hospital',
                            'contact_no': '9876543211',
                            'phone': '9876543211',
                            'email': 'jane.smith@hospital.com',
                            'address': '456 Health Avenue',
                            'registration_no': 'MED12346',
                            'percent': 12.0
                        },
                        response: {
                            'success': true,
                            'message': 'Doctor saved successfully',
                            'data': {
                                'id': 2,
                                'name': 'Dr. Jane Smith'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete doctor by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'Doctor deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Patient API',
                file: 'patient.php',
                description: 'Patient management with demographics, medical history, and contact information',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/patient.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all patients with filters',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        queryParams: {
                            'page': 1,
                            'limit': 10,
                            'search': 'patient name or phone',
                            'gender': 'Male|Female',
                            'age_from': 18,
                            'age_to': 65
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'name': 'John Patient',
                                    'age': 35,
                                    'gender': 'Male',
                                    'phone': '9876543210',
                                    'email': 'john.patient@email.com',
                                    'address': '789 Patient Street',
                                    'blood_group': 'O+',
                                    'emergency_contact': '9876543211',
                                    'medical_history': 'Diabetes, Hypertension',
                                    'created_at': '2025-09-08T10:30:00Z'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single patient by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'name': 'John Patient',
                                'age': 35,
                                'gender': 'Male',
                                'phone': '9876543210',
                                'address': '789 Patient Street',
                                'uhid': '2025000001',
                                'added_by': 1
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update patient',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'name': 'Jane Patient',
                            'age': 28,
                            'gender': 'Female',
                            'phone': '9876543212',
                            'email': 'jane.patient@email.com',
                            'address': '321 Health Road',
                            'blood_group': 'A+',
                            'emergency_contact': '9876543213',
                            'medical_history': 'Allergic to penicillin'
                        },
                        response: {
                            'success': true,
                            'message': 'Patient saved successfully',
                            'data': {
                                'id': 2,
                                'name': 'Jane Patient'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete patient by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'Patient deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Test API',
                file: 'test.php',
                description: 'Laboratory test management with pricing, reference ranges, and categories',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/test.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all laboratory tests',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        queryParams: {
                            'category_id': 1,
                            'search': 'test name',
                            'price_min': 100,
                            'price_max': 1000
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'test_name': 'Complete Blood Count',
                                    'category_id': 1,
                                    'category_name': 'Hematology',
                                    'test_method': 'Automated',
                                    'rate': 500,
                                    'cost': 300,
                                    'description': 'Complete blood count with differential',
                                    'normal_value_male': '4.5-5.5 million cells/mcL',
                                    'normal_value_female': '4.0-5.0 million cells/mcL',
                                    'min_range_male': 4.5,
                                    'max_range_male': 5.5,
                                    'min_range_female': 4.0,
                                    'max_range_female': 5.0,
                                    'unit': 'million cells/mcL'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single test by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'test_name': 'Complete Blood Count',
                                'category_id': 1,
                                'category_name': 'Hematology',
                                'unit': 'million cells/mcL'
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update test',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'test_name': 'Lipid Profile',
                            'category_id': 2,
                            'test_method': 'Enzymatic',
                            'rate': 800,
                            'cost': 500,
                            'description': 'Complete lipid panel',
                            'normal_value_male': '<200 mg/dL',
                            'normal_value_female': '<200 mg/dL',
                            'min_range_male': 0,
                            'max_range_male': 200,
                            'min_range_female': 0,
                            'max_range_female': 200,
                            'unit': 'mg/dL'
                        },
                        response: {
                            'success': true,
                            'message': 'Test saved successfully',
                            'data': {
                                'id': 2,
                                'test_name': 'Lipid Profile'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete test by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'Test deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Test Categories API',
                file: 'test_category.php',
                description: 'Manage test categories and groupings',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/test_category.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all test categories',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'name': 'Hematology',
                                    'description': 'Blood-related tests',
                                    'test_count': 15,
                                    'created_at': '2025-09-08T10:30:00Z'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single test category by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'name': 'Hematology',
                                'description': 'Blood-related tests',
                                'test_count': 15
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update category',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'name': 'Biochemistry',
                            'description': 'Chemical analysis tests'
                        },
                        response: {
                            'success': true,
                            'message': 'Category saved successfully',
                            'data': {
                                'id': 2,
                                'name': 'Biochemistry'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete category by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'Category deleted successfully'
                        }
                    }
                ]
            },

            {
                name: 'User API',
                file: 'user.php',
                description: 'User account and role management',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/user.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all users with roles',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        queryParams: {
                            'role': 'admin|user|doctor|lab_tech',
                            'active': 'true|false'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'username': 'admin',
                                    'full_name': 'System Administrator',
                                    'email': 'admin@hospital.com',
                                    'role': 'admin',
                                    'is_active': true,
                                    'last_login': '2025-09-08T10:30:00Z',
                                    'created_at': '2025-09-01T00:00:00Z'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single user by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'username': 'admin',
                                'full_name': 'System Administrator',
                                'role': 'admin',
                                'is_active': true
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update user',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'username': 'labtech01',
                            'password': 'secure_password',
                            'full_name': 'Lab Technician',
                            'email': 'labtech@hospital.com',
                            'role': 'lab_tech',
                            'is_active': true
                        },
                        response: {
                            'success': true,
                            'message': 'User saved successfully',
                            'data': {
                                'id': 2,
                                'username': 'labtech01'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete user by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'User deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Login API',
                file: 'login.php',
                description: 'Authentication and session management',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/login.php',
                endpoints: [
                    {
                        action: 'login',
                        method: 'POST',
                        url: '?action=login',
                        description: 'Authenticate user and create session',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: {
                            'username': 'admin',
                            'password': 'your_password'
                        },
                        response: {
                            'success': true,
                            'message': 'Login successful',
                            'data': {
                                'user_id': 1,
                                'username': 'admin',
                                'role': 'admin',
                                'session_token': 'abc123def456',
                                'expires_at': '2025-09-08T22:30:00Z'
                            }
                        }
                    },
                    {
                        action: 'logout',
                        method: 'POST',
                        url: '?action=logout',
                        description: 'Destroy session and logout',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer abc123def456'
                        },
                        response: {
                            'success': true,
                            'message': 'Logout successful'
                        }
                    },
                    {
                        action: 'verify',
                        method: 'GET',
                        url: '?action=verify',
                        description: 'Verify session token',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer abc123def456'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'user_id': 1,
                                'username': 'admin',
                                'role': 'admin',
                                'valid': true
                            }
                        }
                    }
                ]
            },
            {
                name: 'Reports API',
                file: 'reports.php',
                description: 'Generate various reports and analytics',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/reports.php',
                endpoints: [
                    {
                        action: 'daily',
                        method: 'GET',
                        url: '?action=daily&date=2025-09-08',
                        description: 'Generate daily report',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'date': '2025-09-08',
                                'total_tests': 45,
                                'completed_tests': 40,
                                'pending_tests': 5,
                                'revenue': 25000,
                                'top_tests': [
                                    {
                                        'test_name': 'Complete Blood Count',
                                        'count': 15
                                    }
                                ]
                            }
                        }
                    },
                    {
                        action: 'generate',
                        method: 'POST',
                        url: '?action=generate',
                        description: 'Generate custom report',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'report_type': 'monthly',
                            'date_from': '2025-09-01',
                            'date_to': '2025-09-08',
                            'include_details': true,
                            'format': 'json|pdf|excel'
                        },
                        response: {
                            'success': true,
                            'message': 'Report generated successfully',
                            'data': {
                                'report_id': 'RPT_20250908_001',
                                'download_url': '/reports/download/RPT_20250908_001.pdf',
                                'expires_at': '2025-09-15T23:59:59Z'
                            }
                        }
                    }
                ]
            },
            {
                name: 'Entry API',
                file: 'entry.php',
                description: 'Comprehensive test entry management with complete database structure (16 columns: id, patient_id, doctor_id, test_id, entry_date, result_value, unit, remarks, status, added_by, created_at, updated_at, grouped, tests_count, test_ids, test_names, test_results)',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/entry.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all test entries with complete database structure and enriched data (16 columns from SQL file)',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        queryParams: {
                            'patient_id': 1,
                            'test_id': 2,
                            'doctor_id': 3,
                            'status': 'pending|completed|failed',
                            'entry_date_from': '2025-09-01',
                            'entry_date_to': '2025-09-30'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 20,
                                    'patient_id': 1,
                                    'doctor_id': 2,
                                    'test_id': 3,
                                    'entry_date': '2025-09-14 11:23:00',
                                    'result_value': '5.6',
                                    'unit': 'mg/dL',
                                    'remarks': 'Fasting blood sugar test',
                                    'status': 'pending',
                                    'added_by': 1,
                                    'created_at': '2025-09-14 11:23:00',
                                    'grouped': 0,
                                    'tests_count': 1,
                                    'test_ids': '["3"]',
                                    'test_names': '["Blood Sugar"]',
                                    'test_results': '["5.6"]',
                                    'patient_name': 'test alk',
                                    'patient_uhid': 'UHID001',
                                    'doctor_name': 'Dr. Smith',
                                    'test_name': 'Blood Sugar',
                                    'added_by_username': 'admin'
                                }
                            ],
                            'total': 1
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=20',
                        description: 'Get single entry by ID with complete database structure (all 16 columns from SQL file)',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 20,
                                'patient_id': 1,
                                'doctor_id': 2,
                                'test_id': 3,
                                'entry_date': '2025-09-14 11:23:00',
                                'result_value': '5.6',
                                'unit': 'mg/dL',
                                'remarks': 'Fasting blood sugar test',
                                'status': 'pending',
                                'added_by': 1,
                                'created_at': '2025-09-14 11:23:00',
                                'grouped': 0,
                                'tests_count': 1,
                                'test_ids': '["3"]',
                                'test_names': '["Blood Sugar"]',
                                'test_results': '["5.6"]',
                                'patient_name': 'test alk',
                                'patient_uhid': 'UHID001',
                                'doctor_name': 'Dr. Smith',
                                'test_name': 'Blood Sugar',
                                'added_by_username': 'admin'
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update test entry with complete database structure (all 16 columns from SQL file)',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': '',
                            'patient_id': 1,
                            'doctor_id': 2,
                            'test_id': 3,
                            'entry_date': '2025-09-14 15:00:00',
                            'result_value': '95.5',
                            'unit': 'mg/dL',
                            'remarks': 'Fasting blood sugar within normal range',
                            'status': 'completed',
                            'grouped': 0,
                            'tests_count': 1,
                            'test_ids': '["3"]',
                            'test_names': '["Blood Sugar"]',
                            'test_results': '["95.5"]'
                        },
                        response: {
                            'success': true,
                            'message': 'Entry saved successfully',
                            'data': {
                                'id': 21,
                                'patient_id': 1,
                                'doctor_id': 2,
                                'test_id': 3,
                                'entry_date': '2025-09-14 15:00:00',
                                'result_value': '95.5',
                                'unit': 'mg/dL',
                                'remarks': 'Fasting blood sugar within normal range',
                                'status': 'completed',
                                'patient_name': 'test alk',
                                'test_name': 'Blood Sugar',
                                'doctor_name': 'Dr. Smith'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete entry by ID (Admin/Master only)',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 21
                        },
                        response: {
                            'success': true,
                            'message': 'Entry deleted successfully'
                        }
                    },
                    {
                        action: 'stats',
                        method: 'GET',
                        url: '?action=stats',
                        description: 'Get entry statistics for dashboard',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'status': 'success',
                            'data': {
                                'total': 25,
                                'pending': 5,
                                'completed': 18,
                                'today': 3
                            }
                        }
                    }
            },
            {
                name: 'Owner API',
                file: 'owner.php',
                description: 'Owner management with contact information and business details',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/owner.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all owners with contact details',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'name': 'John Owner',
                                    'phone': '9876543210',
                                    'whatsapp': '9876543210',
                                    'email': 'john@owner.com',
                                    'address': '123 Business Street',
                                    'added_by': 1,
                                    'created_at': '2025-09-08T10:30:00Z'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single owner by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'name': 'John Owner',
                                'phone': '9876543210',
                                'whatsapp': '9876543210',
                                'email': 'john@owner.com',
                                'address': '123 Business Street'
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update owner',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'name': 'Jane Owner',
                            'phone': '9876543211',
                            'whatsapp': '9876543211',
                            'email': 'jane@owner.com',
                            'address': '456 Business Avenue'
                        },
                        response: {
                            'success': true,
                            'message': 'Owner saved successfully',
                            'data': {
                                'id': 2,
                                'name': 'Jane Owner'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete owner by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'Owner deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Plans API',
                file: 'plans.php',
                description: 'Subscription plans management with pricing and features',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/plans.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all subscription plans',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'name': 'Basic Plan',
                                    'description': 'Basic subscription plan',
                                    'price': 99.99,
                                    'duration_days': 30,
                                    'features': 'Basic features included',
                                    'is_active': true,
                                    'created_at': '2025-09-08T10:30:00Z'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single plan by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'name': 'Basic Plan',
                                'description': 'Basic subscription plan',
                                'price': 99.99,
                                'duration_days': 30,
                                'features': 'Basic features included',
                                'is_active': true
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update plan',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'name': 'Premium Plan',
                            'description': 'Premium subscription plan',
                            'price': 199.99,
                            'duration_days': 30,
                            'features': 'Premium features included',
                            'is_active': true
                        },
                        response: {
                            'success': true,
                            'message': 'Plan saved successfully',
                            'data': {
                                'id': 2,
                                'name': 'Premium Plan'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete plan by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'Plan deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Zip Uploads API',
                file: 'zip_uploads.php',
                description: 'File upload management with zip compression and organization',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/zip_uploads.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all uploaded files',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'filename': 'test_report.pdf',
                                    'original_name': 'test_report.pdf',
                                    'file_path': '/uploads/test_report.pdf',
                                    'file_size': 1024000,
                                    'mime_type': 'application/pdf',
                                    'uploaded_by': 1,
                                    'created_at': '2025-09-08T10:30:00Z'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single file by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'filename': 'test_report.pdf',
                                'original_name': 'test_report.pdf',
                                'file_path': '/uploads/test_report.pdf',
                                'file_size': 1024000,
                                'mime_type': 'application/pdf'
                            }
                        }
                    },
                    {
                        action: 'upload',
                        method: 'POST',
                        url: '?action=upload',
                        description: 'Upload new file',
                        headers: {
                            'Content-Type': 'multipart/form-data',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'file': '[FILE_DATA]',
                            'description': 'Test file upload'
                        },
                        response: {
                            'success': true,
                            'message': 'File uploaded successfully',
                            'data': {
                                'id': 2,
                                'filename': 'uploaded_file.pdf',
                                'file_path': '/uploads/uploaded_file.pdf'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete file by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'File deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Owner API',
                file: 'owner.php',
                description: 'Owner management with contact information and business details',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/owner.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all owners with contact details',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'name': 'John Owner',
                                    'phone': '9876543210',
                                    'whatsapp': '9876543210',
                                    'email': 'john@owner.com',
                                    'address': '123 Business Street',
                                    'added_by': 1,
                                    'created_at': '2025-09-08T10:30:00Z'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single owner by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'name': 'John Owner',
                                'phone': '9876543210',
                                'whatsapp': '9876543210',
                                'email': 'john@owner.com',
                                'address': '123 Business Street'
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update owner',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'name': 'Jane Owner',
                            'phone': '9876543211',
                            'whatsapp': '9876543211',
                            'email': 'jane@owner.com',
                            'address': '456 Business Avenue'
                        },
                        response: {
                            'success': true,
                            'message': 'Owner saved successfully',
                            'data': {
                                'id': 2,
                                'name': 'Jane Owner'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete owner by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'Owner deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Plans API',
                file: 'plans.php',
                description: 'Subscription plans management with pricing and features',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/plans.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all subscription plans',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'name': 'Basic Plan',
                                    'description': 'Basic subscription plan',
                                    'price': 99.99,
                                    'duration_days': 30,
                                    'features': 'Basic features included',
                                    'is_active': true,
                                    'created_at': '2025-09-08T10:30:00Z'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single plan by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'name': 'Basic Plan',
                                'description': 'Basic subscription plan',
                                'price': 99.99,
                                'duration_days': 30,
                                'features': 'Basic features included',
                                'is_active': true
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update plan',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'name': 'Premium Plan',
                            'description': 'Premium subscription plan',
                            'price': 199.99,
                            'duration_days': 30,
                            'features': 'Premium features included',
                            'is_active': true
                        },
                        response: {
                            'success': true,
                            'message': 'Plan saved successfully',
                            'data': {
                                'id': 2,
                                'name': 'Premium Plan'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete plan by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'Plan deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Zip Uploads API',
                file: 'zip_uploads.php',
                description: 'File upload management with zip compression and organization',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/zip_uploads.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all uploaded files',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'filename': 'test_report.pdf',
                                    'original_name': 'test_report.pdf',
                                    'file_path': '/uploads/test_report.pdf',
                                    'file_size': 1024000,
                                    'mime_type': 'application/pdf',
                                    'uploaded_by': 1,
                                    'created_at': '2025-09-08T10:30:00Z'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single file by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'filename': 'test_report.pdf',
                                'original_name': 'test_report.pdf',
                                'file_path': '/uploads/test_report.pdf',
                                'file_size': 1024000,
                                'mime_type': 'application/pdf'
                            }
                        }
                    },
                    {
                        action: 'upload',
                        method: 'POST',
                        url: '?action=upload',
                        description: 'Upload new file',
                        headers: {
                            'Content-Type': 'multipart/form-data',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'file': '[FILE_DATA]',
                            'description': 'Test file upload'
                        },
                        response: {
                            'success': true,
                            'message': 'File uploaded successfully',
                            'data': {
                                'id': 2,
                                'filename': 'uploaded_file.pdf',
                                'file_path': '/uploads/uploaded_file.pdf'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete file by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'File deleted successfully'
                        }
                    }
                ]
            },
            {
                name: 'Notice API',
                file: 'notice.php',
                description: 'Hospital notice and announcement management with date range and active status control',
                baseUrl: 'https://hospital.codeapka.com/umakant/patho_api/notice.php',
                endpoints: [
                    {
                        action: 'list',
                        method: 'GET',
                        url: '?action=list',
                        description: 'Get all notices with author information',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': [
                                {
                                    'id': 1,
                                    'title': 'Hospital Maintenance Notice',
                                    'content': 'The hospital will be undergoing maintenance on Sunday from 8 AM to 12 PM.',
                                    'start_date': '2025-09-15',
                                    'end_date': '2025-09-15',
                                    'active': 1,
                                    'added_by': 1,
                                    'created_at': '2025-09-10T10:00:00Z',
                                    'updated_at': '2025-09-10T10:00:00Z',
                                    'added_by_username': 'admin'
                                }
                            ]
                        }
                    },
                    {
                        action: 'get',
                        method: 'GET',
                        url: '?action=get&id=1',
                        description: 'Get single notice by ID',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        response: {
                            'success': true,
                            'data': {
                                'id': 1,
                                'title': 'Hospital Maintenance Notice',
                                'content': 'The hospital will be undergoing maintenance on Sunday from 8 AM to 12 PM.',
                                'start_date': '2025-09-15',
                                'end_date': '2025-09-15',
                                'active': 1,
                                'added_by': 1,
                                'created_at': '2025-09-10T10:00:00Z',
                                'updated_at': '2025-09-10T10:00:00Z',
                                'added_by_username': 'admin'
                            }
                        }
                    },
                    {
                        action: 'save',
                        method: 'POST',
                        url: '?action=save',
                        description: 'Create or update notice (Admin/Master only)',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': '',
                            'title': 'New Hospital Notice',
                            'content': 'This is a new hospital notice for all staff and patients.',
                            'start_date': '2025-09-20',
                            'end_date': '2025-09-25',
                            'active': 1
                        },
                        response: {
                            'success': true,
                            'message': 'Notice saved successfully',
                            'data': {
                                'id': 2,
                                'title': 'New Hospital Notice',
                                'content': 'This is a new hospital notice for all staff and patients.',
                                'start_date': '2025-09-20',
                                'end_date': '2025-09-25',
                                'active': 1,
                                'added_by': 1,
                                'created_at': '2025-09-11T10:30:00Z',
                                'updated_at': '2025-09-11T10:30:00Z',
                                'added_by_username': 'admin'
                            }
                        }
                    },
                    {
                        action: 'delete',
                        method: 'POST',
                        url: '?action=delete',
                        description: 'Delete notice by ID (Admin/Master only)',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Api-Key': 'hospital-api-secret-2024'
                        },
                        body: {
                            'id': 2
                        },
                        response: {
                            'success': true,
                            'message': 'Notice deleted successfully'
                        }
                    }
                ]
            }
        ];

        let apiResults = {};

        function loadAllApis() {
            const apiList = document.getElementById('apiList');
            apiList.innerHTML = '';

            apiEndpoints.forEach((api, index) => {
                const card = createApiCard(api, index);
                apiList.appendChild(card);
            });

            updateOverview();
            generateDocumentation();
        }

        function createApiCard(api, index) {
            const card = document.createElement('div');
            card.className = 'card api-card';
            
            // Get unique methods from all endpoints
            const methods = [...new Set(api.endpoints.map(ep => ep.method))];
            const actions = api.endpoints.map(ep => ep.action);
            
            card.innerHTML = `
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="fas fa-code text-primary"></i> ${api.name}
                    </h5>
                    <div>
                        <span class="badge bg-primary method-badge">${methods.join(', ')}</span>
                        <button class="btn btn-sm btn-outline-primary" onclick="testSingleApi(${index})">
                            <i class="fas fa-play"></i> Test
                        </button>
                        <button class="btn btn-sm btn-outline-info" onclick="toggleApiDetails(${index})">
                            <i class="fas fa-eye"></i> Details
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <p class="card-text">${api.description}</p>
                    <div class="endpoint-url mb-2">
                        <i class="fas fa-link"></i> ${api.baseUrl}
                    </div>
                    <div class="mb-2">
                        <strong>Actions:</strong> 
                        ${actions.map(action => `<span class="badge bg-secondary me-1">${action}</span>`).join('')}
                    </div>
                    
                    <!-- Detailed API Information -->
                    <div id="api-details-${index}" class="api-details mt-3" style="display: none;">
                        <div class="accordion" id="accordion-${index}">
                            ${api.endpoints.map((endpoint, epIndex) => `
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="heading-${index}-${epIndex}">
                                        <button class="accordion-button collapsed" type="button" 
                                                data-bs-toggle="collapse" 
                                                data-bs-target="#collapse-${index}-${epIndex}" 
                                                aria-expanded="false">
                                            <span class="badge bg-${getMethodColor(endpoint.method)} me-2">${endpoint.method}</span>
                                            <strong>${endpoint.action}</strong> - ${endpoint.description}
                                        </button>
                                    </h2>
                                    <div id="collapse-${index}-${epIndex}" 
                                         class="accordion-collapse collapse" 
                                         data-bs-parent="#accordion-${index}">
                                        <div class="accordion-body">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6><i class="fas fa-arrow-up text-success"></i> Request</h6>
                                                    
                                                    <div class="mb-3">
                                                        <strong>URL:</strong>
                                                        <div class="endpoint-url">${api.baseUrl}${endpoint.url}</div>
                                                    </div>
                                                    
                                                    <div class="mb-3">
                                                        <strong>Headers:</strong>
                                                        <pre class="bg-light p-2 rounded"><code>${JSON.stringify(endpoint.headers, null, 2)}</code></pre>
                                                    </div>
                                                    
                                                    ${endpoint.queryParams ? `
                                                        <div class="mb-3">
                                                            <strong>Query Parameters:</strong>
                                                            <pre class="bg-light p-2 rounded"><code>${JSON.stringify(endpoint.queryParams, null, 2)}</code></pre>
                                                        </div>
                                                    ` : ''}
                                                    
                                                    ${endpoint.body ? `
                                                        <div class="mb-3">
                                                            <strong>Request Body:</strong>
                                                            <pre class="bg-light p-2 rounded"><code>${JSON.stringify(endpoint.body, null, 2)}</code></pre>
                                                        </div>
                                                    ` : ''}
                                                    
                                                    <button class="btn btn-sm btn-success" onclick="copyToClipboard('${index}-${epIndex}-request')">
                                                        <i class="fas fa-copy"></i> Copy Request
                                                    </button>
                                                    
                                                    <button class="btn btn-sm btn-primary" onclick="testSpecificEndpoint(${index}, ${epIndex})">
                                                        <i class="fas fa-play"></i> Test This
                                                    </button>
                                                </div>
                                                
                                                <div class="col-md-6">
                                                    <h6><i class="fas fa-arrow-down text-info"></i> Response</h6>
                                                    <div class="mb-3">
                                                        <strong>Sample Response:</strong>
                                                        <pre class="bg-light p-2 rounded"><code>${JSON.stringify(endpoint.response, null, 2)}</code></pre>
                                                    </div>
                                                    
                                                    <button class="btn btn-sm btn-info" onclick="copyToClipboard('${index}-${epIndex}-response')">
                                                        <i class="fas fa-copy"></i> Copy Response
                                                    </button>
                                                </div>
                                            </div>
                                            
                                            <!-- cURL Command -->
                                            <div class="mt-3">
                                                <h6><i class="fas fa-terminal"></i> cURL Command</h6>
                                                <pre class="bg-dark text-light p-2 rounded"><code id="curl-${index}-${epIndex}">${generateCurlCommand(api, endpoint)}</code></pre>
                                                <button class="btn btn-sm btn-secondary" onclick="copyToClipboard('curl-${index}-${epIndex}')">
                                                    <i class="fas fa-copy"></i> Copy cURL
                                                </button>
                                            </div>
                                            
                                            <!-- JavaScript Example -->
                                            <div class="mt-3">
                                                <h6><i class="fab fa-js-square"></i> JavaScript Example</h6>
                                                <pre class="bg-light p-2 rounded"><code id="js-${index}-${epIndex}">${generateJavaScriptExample(api, endpoint)}</code></pre>
                                                <button class="btn btn-sm btn-warning" onclick="copyToClipboard('js-${index}-${epIndex}')">
                                                    <i class="fas fa-copy"></i> Copy JS
                                                </button>
                                            </div>
                                            
                                            <!-- PHP Example -->
                                            <div class="mt-3">
                                                <h6><i class="fab fa-php"></i> PHP Example</h6>
                                                <pre class="bg-light p-2 rounded"><code id="php-${index}-${epIndex}">${generatePhpExample(api, endpoint)}</code></pre>
                                                <button class="btn btn-sm btn-info" onclick="copyToClipboard('php-${index}-${epIndex}')">
                                                    <i class="fas fa-copy"></i> Copy PHP
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div id="result-${index}" class="mt-3"></div>
                </div>
            `;
            return card;
        }

        function getMethodColor(method) {
            const colors = {
                'GET': 'success',
                'POST': 'primary',
                'PUT': 'warning',
                'DELETE': 'danger'
            };
            return colors[method] || 'secondary';
        }

        function toggleApiDetails(index) {
            const details = document.getElementById(`api-details-${index}`);
            if (details.style.display === 'none') {
                details.style.display = 'block';
            } else {
                details.style.display = 'none';
            }
        }

        function generateCurlCommand(api, endpoint) {
            let curl = `curl -X ${endpoint.method} \\
  "${api.baseUrl}${endpoint.url}" \\`;
            
            // Add headers
            Object.entries(endpoint.headers).forEach(([key, value]) => {
                curl += `\n  -H "${key}: ${value}" \\`;
            });
            
            // Add body if present
            if (endpoint.body) {
                curl += `\n  -d '${JSON.stringify(endpoint.body)}' \\`;
            }
            
            return curl.slice(0, -2); // Remove trailing backslash
        }

        function generateJavaScriptExample(api, endpoint) {
            const options = {
                method: endpoint.method,
                headers: endpoint.headers
            };
            
            if (endpoint.body) {
                options.body = JSON.stringify(endpoint.body);
            }
            
            return `fetch('${api.baseUrl}${endpoint.url}', ${JSON.stringify(options, null, 2)})
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));`;
        }

        function generatePhpExample(api, endpoint) {
            let php = `<?php
$url = '${api.baseUrl}${endpoint.url}';
$headers = [`;
            
            Object.entries(endpoint.headers).forEach(([key, value]) => {
                php += `\n    '${key}: ${value}',`;
            });
            
            php += `
];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);`;

            if (endpoint.method !== 'GET') {
                php += `\ncurl_setopt($ch, CURLOPT_CUSTOMREQUEST, '${endpoint.method}');`;
            }
            
            if (endpoint.body) {
                php += `\ncurl_setopt($ch, CURLOPT_POSTFIELDS, '${JSON.stringify(endpoint.body)}');`;
            }
            
            php += `

$response = curl_exec($ch);
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

$data = json_decode($response, true);
echo json_encode($data, JSON_PRETTY_PRINT);
?>`;
            
            return php;
        }

        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                // Show success feedback
                const button = event.target.closest('button');
                const originalText = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i> Copied!';
                button.classList.add('btn-success');
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.classList.remove('btn-success');
                }, 2000);
            });
        }

        async function testSingleApi(index) {
            const api = apiEndpoints[index];
            const resultDiv = document.getElementById(`result-${index}`);
            
            resultDiv.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i> Testing...</div>';
            
            try {
                // Test the first endpoint (usually list action)
                const endpoint = api.endpoints[0];
                const url = `${api.baseUrl}${endpoint.url}`;
                const headers = getHeaders();
                
                const response = await fetch(url, {
                    method: endpoint.method,
                    headers: { ...endpoint.headers, ...headers }
                });
                
                const data = await response.json();
                const isSuccess = response.ok && data.success !== false;
                
                apiResults[api.file] = {
                    status: isSuccess ? 'success' : 'error',
                    response: data,
                    timestamp: new Date().toISOString()
                };
                
                resultDiv.innerHTML = `
                    <div class="p-2 rounded ${isSuccess ? 'result-success' : 'result-error'}">
                        <strong>${isSuccess ? '✓ Success' : '✗ Error'}</strong>
                        <small class="d-block">Status: ${response.status} | Action: ${endpoint.action}</small>
                        <details class="mt-2">
                            <summary>Response Details</summary>
                            <pre class="mt-2 p-2 bg-light rounded"><code>${JSON.stringify(data, null, 2)}</code></pre>
                        </details>
                    </div>
                `;
                
            } catch (error) {
                apiResults[api.file] = {
                    status: 'error',
                    error: error.message,
                    timestamp: new Date().toISOString()
                };
                
                resultDiv.innerHTML = `
                    <div class="p-2 rounded result-error">
                        <strong>✗ Network Error</strong>
                        <small class="d-block">${error.message}</small>
                    </div>
                `;
            }
            
            updateOverview();
        }

        async function testSpecificEndpoint(apiIndex, endpointIndex) {
            const api = apiEndpoints[apiIndex];
            const endpoint = api.endpoints[endpointIndex];
            const resultDiv = document.getElementById(`result-${apiIndex}`);
            
            try {
                const url = `${api.baseUrl}${endpoint.url}`;
                const headers = { ...endpoint.headers, ...getHeaders() };
                
                const options = {
                    method: endpoint.method,
                    headers: headers
                };
                
                if (endpoint.body) {
                    options.body = JSON.stringify(endpoint.body);
                }
                
                const response = await fetch(url, options);
                const data = await response.json();
                const isSuccess = response.ok && data.success !== false;
                
                resultDiv.innerHTML = `
                    <div class="p-2 rounded ${isSuccess ? 'result-success' : 'result-error'}">
                        <strong>${isSuccess ? '✓ Success' : '✗ Error'}</strong> - ${endpoint.action}
                        <small class="d-block">Status: ${response.status} | Method: ${endpoint.method}</small>
                        <details class="mt-2">
                            <summary>Response Details</summary>
                            <pre class="mt-2 p-2 bg-light rounded"><code>${JSON.stringify(data, null, 2)}</code></pre>
                        </details>
                    </div>
                `;
                
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="p-2 rounded result-error">
                        <strong>✗ Error</strong> - ${endpoint.action}
                        <small class="d-block">${error.message}</small>
                    </div>
                `;
            }
        }

        async function testAllEndpoints() {
            for (let i = 0; i < apiEndpoints.length; i++) {
                await testSingleApi(i);
                // Small delay between requests
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        async function executeManualTest() {
            const method = document.getElementById('testMethod').value;
            const url = document.getElementById('testUrl').value;
            const headersText = document.getElementById('testHeaders').value;
            const bodyText = document.getElementById('testBody').value;
            const resultDiv = document.getElementById('manualTestResult');
            
            try {
                let headers = getHeaders();
                if (headersText.trim()) {
                    const customHeaders = JSON.parse(headersText);
                    headers = { ...headers, ...customHeaders };
                }
                
                const options = {
                    method: method,
                    headers: headers
                };
                
                if (method !== 'GET' && bodyText.trim()) {
                    if (headers['Content-Type']?.includes('application/json')) {
                        options.body = bodyText;
                    } else {
                        options.body = new URLSearchParams(JSON.parse(bodyText));
                    }
                }
                
                const response = await fetch(url, options);
                const data = await response.json();
                
                resultDiv.innerHTML = `
                    <div class="p-3 rounded ${response.ok ? 'result-success' : 'result-error'}">
                        <h5>Response (${response.status} ${response.statusText})</h5>
                        <pre class="p-2 bg-light rounded"><code>${JSON.stringify(data, null, 2)}</code></pre>
                    </div>
                `;
                
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="p-3 rounded result-error">
                        <h5>Error</h5>
                        <pre class="p-2 bg-light rounded"><code>${error.message}</code></pre>
                    </div>
                `;
            }
        }

        function updateOverview() {
            const total = apiEndpoints.length;
            const working = Object.values(apiResults).filter(r => r.status === 'success').length;
            const errors = Object.values(apiResults).filter(r => r.status === 'error').length;
            
            document.getElementById('totalApis').textContent = total;
            document.getElementById('workingApis').textContent = working;
            document.getElementById('errorApis').textContent = errors;
            document.getElementById('lastTested').textContent = new Date().toLocaleTimeString();
            
            // Generate status overview
            const statusOverview = document.getElementById('apiStatusOverview');
            statusOverview.innerHTML = apiEndpoints.map((api, index) => {
                const result = apiResults[api.file];
                const status = result ? result.status : 'untested';
                const icon = status === 'success' ? '✓' : status === 'error' ? '✗' : '○';
                const color = status === 'success' ? 'success' : status === 'error' ? 'danger' : 'secondary';
                
                return `
                    <div class="d-flex justify-content-between align-items-center p-2 border-bottom">
                        <span>${api.name}</span>
                        <span class="badge bg-${color}">${icon} ${status}</span>
                    </div>
                `;
            }).join('');
        }

        function generateDocumentation() {
            const docsDiv = document.getElementById('endpointsDocs');
            docsDiv.innerHTML = apiEndpoints.map(api => `
                <div class="mb-3 p-3 border rounded">
                    <h6>${api.name}</h6>
                    <p>${api.description}</p>
                    <div class="endpoint-url">${getBaseUrl()}${api.file}</div>
                    <div class="mt-2">
                        <strong>Methods:</strong> ${api.methods.join(', ')}<br>
                        <strong>Actions:</strong> ${api.actions.join(', ')}<br>
                        <strong>Sample Data:</strong> <code>${JSON.stringify(api.sampleData, null, 2)}</code>
                    </div>
                </div>
            `).join('');
        }

        function getBaseUrl() {
            return document.getElementById('baseUrl').value || '/umakant/patho_api/';
        }

        function getHeaders() {
            const headers = {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
                'X-Api-Key': 'hospital-api-secret-2024' // Use the shared secret for authentication
            };
            
            const apiKey = document.getElementById('apiKey').value;
            if (apiKey) {
                headers['X-Api-Key'] = apiKey; // Override with custom key if provided
            }
            
            return headers;
        }

        function generateCodeExample(api, endpoint, language) {
            const baseUrl = api.baseUrl;
            const url = `${baseUrl}${endpoint.url}`;
            const headers = { ...endpoint.headers, ...getHeaders() };
            
            switch (language) {
                case 'curl':
                    let curlCmd = `curl -X ${endpoint.method}`;
                    Object.entries(headers).forEach(([key, value]) => {
                        curlCmd += ` \\\n  -H "${key}: ${value}"`;
                    });
                    if (endpoint.body) {
                        curlCmd += ` \\\n  -d '${JSON.stringify(endpoint.body)}'`;
                    }
                    curlCmd += ` \\\n  "${url}"`;
                    return curlCmd;
                    
                case 'javascript':
                    return `// ${endpoint.action}
const response = await fetch('${url}', {
    method: '${endpoint.method}',
    headers: ${JSON.stringify(headers, null, 8)},${endpoint.body ? `
    body: JSON.stringify(${JSON.stringify(endpoint.body, null, 8)})` : ''}
});

const data = await response.json();
console.log(data);`;

                case 'php':
                    return `<?php
// ${endpoint.action}
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, '${url}');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, '${endpoint.method}');
curl_setopt($ch, CURLOPT_HTTPHEADER, [
${Object.entries(headers).map(([key, value]) => `    '${key}: ${value}'`).join(',\n')}
]);${endpoint.body ? `
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode(${JSON.stringify(endpoint.body, null, 4).replace(/"/g, "'")}));` : ''}

$response = curl_exec($ch);
$data = json_decode($response, true);
curl_close($ch);

print_r($data);
?>`;

                default:
                    return 'Language not supported';
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadAllApis();
        });
    </script>
</body>
</html>

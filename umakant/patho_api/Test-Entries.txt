Test Entries API (patho_api/entry.php)

Overview
- JSON API endpoint: /patho_api/entry.php
- Mirrors `ajax/entry_api.php` behavior and fields.
- Session-based auth: create/update/delete require `admin` or `master` role.

Fields used by UI
- id
- patient_id, patient_name
- doctor_id, doctor_name
- test_id, test_name
- entry_date
- result_value
- unit
- remarks
- status
- added_by

Actions / Usage

1) list
- Method: GET
- Params: action=list
- Response: { "success": true, "data": [ { "id":1, "patient_name":"John", "doctor_name":"Dr X", "test_name":"CBC", "entry_date":"2025-08-26 12:00:00", "result_value":"5.6", "unit":"g/dL", "remarks":"", "status":"completed" }, ... ] }

2) get
- Method: GET
- Params: action=get&id=<id>
- Response: { "success": true, "data": { <entry object> } }
- 404 if not found

3) save
- Method: POST
- Params (form): action=save; id (optional); patient_id; doctor_id; test_id; entry_date; result_value; unit; remarks; status
- Auth: session role `admin` or `master` required
- Response: { "success": true, "message": "Entry created" } or { "success": true, "message": "Entry updated" }

4) delete
- Method: POST
- Params: action=delete&id=<id>
- Auth: session role `admin` or `master` required
- Response: { "success": true, "message": "Entry deleted" }

Postman / curl examples
- List entries:
  curl "https://yourhost/patho_api/entry.php?action=list"

- Get entry:
  curl "https://yourhost/patho_api/entry.php?action=get&id=7"

- Create entry (POST):
  curl -X POST "https://yourhost/patho_api/entry.php" \
    -d "action=save" \
    -d "patient_id=3" \
    -d "doctor_id=2" \
    -d "test_id=10" \
    -d "entry_date=2025-08-26 12:00:00" \
    -d "result_value=5.6" \
    -d "unit=g/dL" \
    -d "remarks=OK" \
    -d "status=completed" \
    --cookie "PHPSESSID=<session id>"

- Update entry (POST):
  curl -X POST "https://yourhost/patho_api/entry.php" \
    -d "action=save" -d "id=7" -d "result_value=5.8" \
    --cookie "PHPSESSID=<session id>"

- Delete entry (POST):
  curl -X POST "https://yourhost/patho_api/entry.php" \
    -d "action=delete" -d "id=7" \
    --cookie "PHPSESSID=<session id>"

Notes
- To test protected endpoints, use a valid session cookie from the webapp in Postman or curl.
- Response bodies return JSON and include HTTP status codes for errors.

Files
- API: patho_api/entry.php
- Docs: patho_api/Test-Entries.txt

Generated: Aug 26, 2025
